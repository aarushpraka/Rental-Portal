"use strict";(self.webpackChunktalking_web=self.webpackChunktalking_web||[]).push([[555],{936:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var n=a(555),s=a(43),l=a(791),i=a(434),r=a(472),c=a(184),d=a(200),o=a(488),u=a(579);const m={color:"#c3b1e1",marginRight:"8px",verticalAlign:"middle"},h="tenant",x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],j=(new Date).getFullYear(),p=[String(j-1),String(j),String(j+1),String(j+2)],v=e=>{let{label:t,value:a}=e;return(0,u.jsxs)("div",{className:"card summary-card",children:[t,": ",(0,u.jsx)("strong",{children:a})]})};function g(e){let{type:t,tenants:a,addedByEmail:i,onRefreshBills:c,currency:d,numberFmt:o}=e;const[m,h]=(0,s.useState)(""),[j,v]=(0,s.useState)(""),[g,b]=(0,s.useState)(x[(new Date).getMonth()]),[N,f]=(0,s.useState)(String((new Date).getFullYear())),[y,S]=(0,s.useState)(""),[w,C]=(0,s.useState)(!1),[A,k]=(0,s.useState)(""),[M,F]=(0,s.useState)(""),[I,T]=(0,s.useState)(""),[R,B]=(0,s.useState)(""),[D,E]=(0,s.useState)(""),[O,P]=(0,s.useState)(0),[L,H]=(0,s.useState)("");(0,s.useEffect)((()=>{if(A||M){const e=setTimeout((()=>{k(""),F("")}),3e3);return()=>clearTimeout(e)}}),[A,M]);(0,s.useEffect)((()=>{(async()=>{if("electricity"!==t||!m||!g||!N)return P(0),H(""),void E("");let e=x.indexOf(g)-1,a=parseInt(N);e<0&&(e=11,a-=1);const n=x[e],s=String(a);try{const e=(0,r.rJ)(l.db,"users",m,"bill"),t=(0,r.P)(e,(0,r._M)("type","==","electricity"),(0,r._M)("month","==",n),(0,r._M)("year","==",s),(0,r.AB)(1)),a=await(0,r.GG)(t);if(!a.empty){var i,c;const e=a.docs[0].data(),t=Number(null!==(i=null!==(c=e.currentUnit)&&void 0!==c?c:e.meterCurrent)&&void 0!==i?i:0);if(Number.isFinite(t))return P(t),H(String(t)),void E("Fetched last unit from ".concat(n," ").concat(s,": ").concat(t))}P(0),H(""),E("No previous bill found for ".concat(n," ").concat(s))}catch(M){console.error("Error fetching previous bill:",M),P(0),H(""),E("Error fetching previous bill")}})()}),[t,m,g,N]),(0,s.useEffect)((()=>{if("electricity"!==t)return;const e=Number(L)||0,a=Number(I)||0,n=Number(R)||0,s=Math.max(0,a-e),l=Math.max(0,s*n);v(l?String(l.toFixed(2)):"")}),[t,L,I,R]);return(0,u.jsxs)("div",{className:"tenant-form-container",children:[(0,u.jsx)("h2",{className:"form-heading",children:"rent"===t?"Set Rent Amount":"Set Electricity Amount"}),(0,u.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"tenant-form",children:[(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("select",{className:"select",value:m,onChange:e=>h(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select Tenant"}),a.filter((e=>!1!==e.active)).map((e=>(0,u.jsxs)("option",{value:e.id,children:[e.name," (Flat ",e.flatNumber,")"]},e.id)))]})}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("select",{className:"select",value:g,onChange:e=>b(e.target.value),children:x.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))}),(0,u.jsx)("select",{className:"select",value:N,onChange:e=>f(e.target.value),children:p.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))})]}),"rent"===t?(0,u.jsx)("div",{className:"form-group",children:(0,u.jsx)("input",{className:"input",type:"number",placeholder:"Amount",value:j,onChange:e=>v(e.target.value)})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("input",{className:"input",type:"number",placeholder:"Last unit (auto from previous bill)",value:L,onChange:e=>H(e.target.value),title:"Last recorded meter reading"}),(0,u.jsx)("input",{className:"input",type:"number",placeholder:"Current unit",value:I,onChange:e=>T(e.target.value)}),(0,u.jsx)("input",{className:"input",type:"number",placeholder:"Rate per unit",value:R,onChange:e=>B(e.target.value)})]}),(0,u.jsxs)("div",{className:"form-group",style:{gap:8},children:[(0,u.jsxs)("div",{className:"input",style:{pointerEvents:"none"},children:["Units used: ",Math.max(0,(Number(I)||0)-(Number(L)||0))]}),(0,u.jsxs)("div",{className:"input",style:{pointerEvents:"none"},children:["Calculated amount: \u20b9",(e=>{try{return null!==o&&void 0!==o&&o.format?o.format(e):new Intl.NumberFormat("en-IN",{maximumFractionDigits:2}).format(e)}catch(t){return String(e)}})(j||0)]})]})]}),(0,u.jsx)("div",{className:"form-group",children:(0,u.jsx)("input",{className:"input",type:"text",placeholder:"Optional note",value:y,onChange:e=>S(e.target.value)})}),D&&(0,u.jsxs)("p",{className:"form-info",children:["\u2139\ufe0f ",D]}),M&&(0,u.jsxs)("p",{className:"form-error",children:["\u26a0\ufe0f ",M]}),A&&(0,u.jsxs)("p",{className:"form-success",children:["\u2705 ",A]}),(0,u.jsx)("button",{type:"button",className:"btn btn-primary",disabled:w,onClick:async()=>{if(F(""),k(""),!m||!g||!N)return void F("Please fill all fields.");let e=Number(j);if("electricity"===t){const t=Number(L),a=Number(I),n=Number(R);if(!Number.isFinite(t)||!Number.isFinite(a)||!Number.isFinite(n))return void F("Enter valid numbers for last unit, current unit, and rate.");if(a<t)return void F("Current unit cannot be less than last unit.");if(e=+((a-t)*n).toFixed(2),!Number.isFinite(e)||e<0)return void F("Calculated amount is invalid.")}else{if(!j)return void F("Please enter amount.");if(!Number.isFinite(e))return void F("Amount must be a number.")}C(!0);try{const a=(0,r.rJ)(l.db,"users",m,"bill"),s=(0,r.P)(a,(0,r._M)("type","==",t),(0,r._M)("month","==",g),(0,r._M)("year","==",N));if(!(await(0,r.GG)(s)).empty)return F("Duplicate bill for selected month/year."),void C(!1);const c="".concat(t.toUpperCase(),"-").concat(g,"-").concat(N,"-").concat(m),d=x.indexOf(g)+1,o="".concat(N,"-").concat(String(d).padStart(2,"0"),"-01"),u={addedBy:i,amount:e,billFor:o,createdAt:(0,r.O5)(),month:g,note:y||"",refId:c,status:"Pending",tenantId:m,type:t,updatedAt:(0,r.O5)(),year:N},h="electricity"===t?{lastUnit:Number(L)||0,currentUnit:Number(I)||0,unitsUsed:Math.max(0,(Number(I)||0)-(Number(L)||0)),ratePerUnit:Number(R)||0}:{};await(0,r.gS)(a,(0,n.A)((0,n.A)({},u),h))}catch(a){return F("Failed to add bill."),void C(!1)}try{k("Bill added (\u20b9".concat(Number(e).toFixed(2),")")),h(""),v(""),b(x[(new Date).getMonth()]),f(String((new Date).getFullYear())),S(""),T(""),B(""),H(0),E(""),c&&await c()}finally{C(!1)}},children:w?"Saving...":"Add ".concat("rent"===t?"Rent":"Electricity")})]})]})}const b=()=>{const[e,t]=(0,s.useState)([]),[a,j]=(0,s.useState)([]),[b,N]=(0,s.useState)(!0),[f,y]=(0,s.useState)(null),[S,w]=(0,s.useState)(!1),[C,A]=(0,s.useState)(""),[k,M]=(0,s.useState)(""),[F,I]=(0,s.useState)({name:"",flatNumber:"",rentAmount:"",joinedOn:(new Date).toISOString().split("T")[0],contact:"",email:"",password:""}),[T,R]=(0,s.useState)("undefined"===typeof window||window.innerWidth<=768);(0,s.useEffect)((()=>{const e=()=>R(window.innerWidth<=768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const B={addedByEmail:"aarushpraka@gmail.com",currency:"\u20b9",flatLimit:10,homeMonth:x[(new Date).getMonth()],homeYear:String((new Date).getFullYear()),homeView:"currentMonth",showInactive:!1,pageSize:10,locale:"en-IN"},[D,E]=(0,s.useState)((()=>{const e=localStorage.getItem("adminSettings");return e?JSON.parse(e):B})),O=(0,s.useMemo)((()=>new Intl.NumberFormat(D.locale||"en-IN",{style:"currency",currency:D.currencyCode||"INR",currencyDisplay:"symbol"})),[D.locale,D.currencyCode]),[P,L]=(0,s.useState)(""),[H,U]=(0,s.useState)("all"),[Y,G]=(0,s.useState)("all"),[J,q]=(0,s.useState)("all"),[_,z]=(0,s.useState)("all"),[Q,V]=(0,s.useState)("all"),[W,Z]=(0,s.useState)(""),[K,X]=(0,s.useState)(1),[$,ee]=(0,s.useState)(""),[te,ae]=(0,s.useState)("flatAsc"),[ne,se]=(0,s.useState)("all"),[le,ie]=(0,s.useState)(!0),[re,ce]=(0,s.useState)(""),[de,oe]=(0,s.useState)(x[(new Date).getMonth()]),[ue,me]=(0,s.useState)(String((new Date).getFullYear())),[he,xe]=(0,s.useState)(x[(new Date).getMonth()]),[je,pe]=(0,s.useState)(String((new Date).getFullYear())),[ve,ge]=(0,s.useState)(!1),be=e=>{const t=(0,n.A)((0,n.A)({},D),e);E(t),localStorage.setItem("adminSettings",JSON.stringify(t))},Ne=async()=>{N(!0);try{const e=(0,r.P)((0,r.rJ)(l.db,"users"),(0,r._M)("role","==",h)),a=(await(0,r.GG)(e)).docs.map((e=>(0,n.A)({id:e.id,active:!1!==e.data().active},e.data())));t(a);const s=[];for(const t of a){const e=(0,r.rJ)(l.db,"users",t.id,"bill");(await(0,r.GG)(e)).forEach((e=>s.push((0,n.A)((0,n.A)({id:e.id,tenantId:t.id},e.data()),{},{amount:Number(e.data().amount)}))))}j(s)}catch(e){A("Error loading data.")}finally{N(!1)}};(0,s.useEffect)((()=>{Ne()}),[]),(0,s.useEffect)((()=>{const e=new Date,t=x[e.getMonth()],a=e.getFullYear();G(t),q(a)}),[]);(0,s.useEffect)((()=>{X(1)}),[P,H,Y,J,_,Q,W]);const fe=(0,s.useMemo)((()=>{const e=new Map;for(const t of a)e.has(t.tenantId)||e.set(t.tenantId,[]),e.get(t.tenantId).push(t);return e}),[a]),ye=(0,s.useMemo)((()=>a.filter((e=>"rent"===e.type)).reduce(((e,t)=>e+(Number(t.amount)||0)),0)),[a]),Se=(0,s.useMemo)((()=>a.filter((e=>"electricity"===e.type)).reduce(((e,t)=>e+(Number(t.amount)||0)),0)),[a]),we=(0,s.useMemo)((()=>{const e=new Set(a.map((e=>e.addedBy)).filter(Boolean));return["all",...Array.from(e)]}),[a]),Ce=(0,s.useMemo)((()=>{const e=new Set(a.map((e=>String(e.year))).filter(Boolean)),t=Array.from(e).sort();return["all",...Array.from(new Set([...t,...p]))]}),[a]),Ae=(0,s.useMemo)((()=>a.filter((e=>{if(P&&e.tenantId!==P)return!1;if("all"!==H&&e.type!==H)return!1;if("all"!==Y&&e.month!==Y)return!1;if("all"!==J&&String(e.year)!==String(J))return!1;if("all"!==_&&e.status!==_)return!1;if("all"!==Q&&e.addedBy!==Q)return!1;if(W){if(!"".concat(e.refId||""," ").concat(e.type||""," ").concat(e.month||""," ").concat(e.year||"").toLowerCase().includes(W.toLowerCase()))return!1}return!0}))),[a,P,H,Y,J,_,Q,W]),ke=(0,s.useMemo)((()=>{const e=Ae.filter((e=>"rent"===e.type)).reduce(((e,t)=>e+(Number(t.amount)||0)),0),t=Ae.filter((e=>"electricity"===e.type)).reduce(((e,t)=>e+(Number(t.amount)||0)),0);return{rent:e,elec:t,grand:e+t}}),[Ae]),Me=(0,s.useMemo)((()=>Math.max(1,Math.ceil(Ae.length/Number(D.pageSize||10)))),[Ae.length,D.pageSize]),Fe=(0,s.useMemo)((()=>{const e=e=>{var t,a;return null!==e&&void 0!==e&&null!==(t=e.createdAt)&&void 0!==t&&t.toDate?e.createdAt.toDate().getTime():null!==e&&void 0!==e&&null!==(a=e.createdAt)&&void 0!==a&&a.seconds?1e3*e.createdAt.seconds:null!==e&&void 0!==e&&e.billFor?new Date(e.billFor).getTime():0};return Ae.slice().sort(((t,a)=>e(a)-e(t)))}),[Ae]),Ie=(0,s.useMemo)((()=>{const e=(K-1)*Number(D.pageSize||10);return Fe.slice(e,e+Number(D.pageSize||10))}),[Fe,K,D.pageSize]);(0,s.useEffect)((()=>{K>Me&&X(1)}),[K,Me]);const Te=(e,t)=>{const a=fe.get(e)||[];if("currentMonth"===D.homeView)return a.find((e=>e.type===t&&e.month===D.homeMonth&&String(e.year)===String(D.homeYear)));const n=a.filter((e=>e.type===t));return n.sort(((e,t)=>{var a,n;const s=(null===e||void 0===e||null===(a=e.createdAt)||void 0===a?void 0:a.seconds)||0;return((null===t||void 0===t||null===(n=t.createdAt)||void 0===n?void 0:n.seconds)||0)-s})),n[0]},Re=e=>x.indexOf(e),Be=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bills.csv";const n=[["Tenant","Flat","Type","Month","Year","Amount","Status","Added By","Created At","Ref ID"]];for(const d of t){var s;const t=e.find((e=>e.id===d.tenantId)),a=null!==d&&void 0!==d&&null!==(s=d.createdAt)&&void 0!==s&&s.toDate?d.createdAt.toDate().toISOString():(null===d||void 0===d?void 0:d.billFor)||"";n.push([(null===t||void 0===t?void 0:t.name)||"",(null===t||void 0===t?void 0:t.flatNumber)||"",d.type||"",d.month||"",String(d.year||""),String(Number(d.amount)||0),d.status||"",d.addedBy||"",a,d.refId||""])}const l=n.map((e=>e.map((e=>'"'.concat(String(e).replace(/"/g,'""'),'"'))).join(","))).join("\n"),i=new Blob([l],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),c=document.createElement("a");c.href=r,c.download=a,c.click(),URL.revokeObjectURL(r)},De=t=>{const n=a.filter((e=>e.tenantId===t)),s=e.find((e=>e.id===t));Be(n,"statement_".concat((null===s||void 0===s?void 0:s.name)||t,".csv"))},Ee=async(e,t)=>{try{await(0,r.mZ)((0,r.H9)(l.db,"users",e),t),await Ne()}catch(a){}},Oe=e=>{if("Paid"===e.status)return!1;const t=(new Date).getFullYear(),a=(new Date).getMonth(),n=parseInt(e.year,10),s=x.indexOf(e.month);return n<t||n===t&&s<a},Pe=(0,s.useMemo)((()=>{let t=e.filter((e=>!!D.showInactive||!1!==e.active));if($){const e=$.toLowerCase();t=t.filter((t=>"".concat(t.name||""," ").concat(t.flatNumber||"").toLowerCase().includes(e)))}return"flatAsc"===te&&t.sort(((e,t)=>String(e.flatNumber).localeCompare(String(t.flatNumber)))),"flatDesc"===te&&t.sort(((e,t)=>String(t.flatNumber).localeCompare(String(e.flatNumber)))),"nameAsc"===te&&t.sort(((e,t)=>String(e.name).localeCompare(String(t.name)))),"nameDesc"===te&&t.sort(((e,t)=>String(t.name).localeCompare(String(e.name)))),t}),[e,$,te,D.showInactive]);(0,s.useMemo)((()=>{const e=D.homeYear;return x.map((t=>{const n=a.filter((a=>"rent"===a.type&&String(a.year)===String(e)&&a.month===t)).reduce(((e,t)=>e+(Number(t.amount)||0)),0),s=a.filter((a=>"electricity"===a.type&&String(a.year)===String(e)&&a.month===t)).reduce(((e,t)=>e+(Number(t.amount)||0)),0);return{month:t,rent:n,elec:s,total:n+s}}))}),[a,D.homeYear]);return(0,u.jsxs)("div",{className:"admin-dashboard",style:{backgroundColor:"red"},children:[(0,u.jsxs)("div",{className:"admin-layout",children:[!T&&(0,u.jsxs)("aside",{className:"sidebar-left sidebar-fixed",children:[(0,u.jsx)("div",{className:"sidebar-header",children:(0,u.jsx)("h3",{className:"sidebar-title",children:"\u26a1 Quick Actions"})}),(0,u.jsxs)("ul",{className:"quick-action-list",children:[(0,u.jsxs)("li",{className:"quick-action-item",onClick:()=>{y(null)},children:[(0,u.jsx)(c.rQ8,{style:m})," Home"]}),(0,u.jsxs)("li",{className:"quick-action-item",onClick:()=>{y("addTenant")},children:[(0,u.jsx)(c.OiG,{style:m})," Add Tenant"]}),(0,u.jsxs)("li",{className:"quick-action-item",onClick:()=>{y("setRent")},children:[(0,u.jsx)(c.MxO,{style:m})," Set Rent"]}),(0,u.jsxs)("li",{className:"quick-action-item",onClick:()=>{y("setElectricity")},children:[(0,u.jsx)(c.lHQ,{style:m})," Set Electricity"]}),(0,u.jsxs)("li",{className:"quick-action-item",onClick:()=>{y("bulk")},children:[(0,u.jsx)(c.aQJ,{style:m})," Bulk Tools"]}),(0,u.jsxs)("li",{className:"quick-action-item",onClick:()=>{y("billList")},children:[(0,u.jsx)(c.wTh,{style:m})," All Bills"]}),(0,u.jsxs)("li",{className:"quick-action-item",onClick:()=>{y("settings")},children:[(0,u.jsx)(c.Pcn,{style:m})," Settings"]})]})]}),(0,u.jsxs)("main",{className:"admin-main ".concat(T?"mobile":"desktop"),children:[(0,u.jsxs)("div",{className:"dashboard-header",children:[(0,u.jsx)("h2",{className:"dashboard-title",children:"Admin Dashboard"}),(0,u.jsx)("div",{className:"header-actions",children:(0,u.jsx)("button",{className:"btn logout-icon",onClick:()=>{const e=(0,i.xI)();(0,i.CI)(e).catch((()=>{}))},title:"Logout",children:(0,u.jsx)(d.QeK,{})})})]}),(0,u.jsxs)("div",{className:"dashboard-body",children:["addTenant"===f&&(0,u.jsxs)("div",{className:"tenant-form-container",children:[(0,u.jsx)("h2",{className:"form-heading",children:"Add New Tenant"}),(0,u.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),A(""),M("");const{name:a,flatNumber:n,rentAmount:s,joinedOn:c,contact:d,email:o,password:u}=F;if(a&&n&&s&&o&&u)if(Number.isNaN(Number(s)))A("Rent must be numeric.");else if(e.some((e=>"".concat(e.flatNumber).trim()==="".concat(n).trim())))A("Flat number already assigned.");else{w(!0);try{const e=(0,i.xI)(),t=(await(0,i.eJ)(e,o,u)).user.uid;await(0,r.BN)((0,r.H9)(l.db,"users",t),{name:a,flatNumber:n,rentAmount:Number(s),joinedOn:c,contact:d,role:h,email:o,active:!0}),M("Tenant added successfully."),I({name:"",flatNumber:"",rentAmount:"",joinedOn:(new Date).toISOString().split("T")[0],contact:"",email:"",password:""}),await Ne()}catch(m){A("Failed to add tenant.")}finally{w(!1)}}else A("Please fill all required fields.")},className:"tenant-form",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("input",{className:"input",type:"text",placeholder:"Tenant Name",value:F.name,onChange:e=>I((0,n.A)((0,n.A)({},F),{},{name:e.target.value})),required:!0}),(0,u.jsx)("input",{className:"input",type:"text",placeholder:"Flat Number",value:F.flatNumber,onChange:e=>I((0,n.A)((0,n.A)({},F),{},{flatNumber:e.target.value})),required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("input",{className:"input",type:"number",placeholder:"Rent Amount",value:F.rentAmount,onChange:e=>I((0,n.A)((0,n.A)({},F),{},{rentAmount:e.target.value})),required:!0}),(0,u.jsx)("input",{className:"input",type:"date",value:F.joinedOn,onChange:e=>I((0,n.A)((0,n.A)({},F),{},{joinedOn:e.target.value})),required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("input",{className:"input",type:"email",placeholder:"Email",value:F.email,onChange:e=>I((0,n.A)((0,n.A)({},F),{},{email:e.target.value})),required:!0}),(0,u.jsx)("input",{className:"input",type:"password",placeholder:"Password",value:F.password,onChange:e=>I((0,n.A)((0,n.A)({},F),{},{password:e.target.value})),required:!0})]}),C&&(0,u.jsxs)("p",{className:"form-error",children:["\u26a0\ufe0f ",C]}),k&&(0,u.jsxs)("p",{className:"form-success",children:["\u2705 ",k]}),(0,u.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:S,children:S?"Saving...":"Add Tenant"})]})]}),"setRent"===f&&(0,u.jsx)(g,{type:"rent",tenants:e,addedByEmail:D.addedByEmail,onRefreshBills:Ne}),"setElectricity"===f&&(0,u.jsx)(g,{type:"electricity",tenants:e,addedByEmail:D.addedByEmail,onRefreshBills:Ne}),"bulk"===f&&(0,u.jsxs)("div",{className:"tenant-form-container",children:[(0,u.jsx)("h2",{className:"form-heading",children:"Bulk Rent Creation"}),(0,u.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"tenant-form",children:[(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("select",{className:"select",value:ne,onChange:e=>se(e.target.value),children:[(0,u.jsx)("option",{value:"all",children:"All Active Tenants"}),e.filter((e=>!1!==e.active)).map((e=>(0,u.jsxs)("option",{value:e.id,children:[e.name," (Flat ",e.flatNumber,")"]},e.id)))]})}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("select",{className:"select",value:de,onChange:e=>oe(e.target.value),children:x.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))}),(0,u.jsx)("select",{className:"select",value:ue,onChange:e=>me(e.target.value),children:p.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))}),(0,u.jsx)("span",{className:"range-to",children:"to"}),(0,u.jsx)("select",{className:"select",value:he,onChange:e=>xe(e.target.value),children:x.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))}),(0,u.jsx)("select",{className:"select",value:je,onChange:e=>pe(e.target.value),children:p.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsxs)("label",{className:"checkbox",children:[(0,u.jsx)("input",{type:"checkbox",checked:le,onChange:e=>ie(e.target.checked)}),"Use tenant rent amount"]}),!le&&(0,u.jsx)("input",{className:"input",type:"number",placeholder:"Custom amount",value:re,onChange:e=>ce(e.target.value)})]}),(0,u.jsx)("button",{type:"button",className:"btn btn-primary",disabled:ve,onClick:async()=>{ge(!0);try{const t=((e,t,a,n)=>{const s=Re(e),l=Re(a);let i=parseInt(t,10),r=s;const c=parseInt(n,10),d=l,o=[];for(;i<c||i===c&&r<=d;)o.push({month:x[r],year:String(i),billFor:(u=i,m=r,"".concat(u,"-").concat(String(m+1).padStart(2,"0"),"-01"))}),r++,r>11&&(r=0,i++);var u,m;return o})(de,ue,he,je),a="all"===ne?e.filter((e=>!1!==e.active)):e.filter((e=>e.id===ne)),n=Number(re);for(const e of a)for(const a of t){const t=(0,r.rJ)(l.db,"users",e.id,"bill"),s=(0,r.P)(t,(0,r._M)("type","==","rent"),(0,r._M)("month","==",a.month),(0,r._M)("year","==",a.year));if(!(await(0,r.GG)(s)).empty)continue;const i=le?Number(e.rentAmount||0):Number.isNaN(n)?0:n,c="RENT-".concat(a.month,"-").concat(a.year,"-").concat(e.id);await(0,r.gS)(t,{addedBy:D.addedByEmail,amount:i,billFor:a.billFor,createdAt:(0,r.O5)(),month:a.month,note:"",refId:c,status:"Pending",tenantId:e.id,type:"rent",updatedAt:(0,r.O5)(),year:a.year})}await Ne(),alert("Bulk rent bills created for selected range.")}catch(t){alert("Bulk creation failed.")}finally{ge(!1)}},children:ve?"Creating...":"Create Rent Bills"})]})]}),"billList"===f&&(0,u.jsxs)("div",{className:"bill-list-container",children:[(0,u.jsx)("h2",{className:"form-heading",children:"All Bills"}),(0,u.jsxs)("div",{className:"filters-row",children:[(0,u.jsxs)("select",{className:"select",value:P,onChange:e=>{L(e.target.value)},children:[(0,u.jsx)("option",{value:"",children:"All Tenants"}),e.map((e=>(0,u.jsxs)("option",{value:e.id,children:[e.name," (Flat ",e.flatNumber,")"]},e.id)))]}),(0,u.jsxs)("select",{className:"select",value:H,onChange:e=>{U(e.target.value)},children:[(0,u.jsx)("option",{value:"all",children:"All Types"}),(0,u.jsx)("option",{value:"rent",children:"Rent"}),(0,u.jsx)("option",{value:"electricity",children:"Electricity"})]}),(0,u.jsxs)("select",{className:"select",value:Y,onChange:e=>{G(e.target.value)},children:[(0,u.jsx)("option",{value:"all",children:"All Months"}),x.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))]}),(0,u.jsx)("select",{className:"select",value:J,onChange:e=>{q(e.target.value)},children:Ce.map((e=>(0,u.jsx)("option",{value:e,children:"all"===e?"All Years":e},e)))}),(0,u.jsxs)("select",{className:"select",value:_,onChange:e=>{z(e.target.value)},children:[(0,u.jsx)("option",{value:"all",children:"All Status"}),(0,u.jsx)("option",{value:"Pending",children:"Pending"}),(0,u.jsx)("option",{value:"Paid",children:"Paid"})]}),(0,u.jsx)("select",{className:"select",value:Q,onChange:e=>{V(e.target.value)},children:we.map((e=>(0,u.jsx)("option",{value:e,children:"all"===e?"All Added By":e},e)))}),(0,u.jsxs)("span",{className:"search-input",children:[(0,u.jsx)(c.KSO,{style:{marginRight:6}}),(0,u.jsx)("input",{className:"input",type:"text",placeholder:"Search ref/type/month/year",value:W,onChange:e=>{Z(e.target.value)}})]}),(0,u.jsx)("button",{className:"btn",onClick:()=>{L(""),U("all"),G("all"),q("all"),z("all"),V("all"),Z("")},children:"Reset"}),(0,u.jsxs)("button",{className:"btn",onClick:()=>Be(),children:[(0,u.jsx)(c.WCW,{style:{marginRight:6}}),"Export CSV"]}),(0,u.jsxs)("button",{className:"btn btn-primary",onClick:async()=>{if(!Ae.length)return;if(window.confirm("Mark ".concat(Ae.length," filtered bills as Paid?"))){for(const t of Ae)if("Paid"!==t.status)try{await(0,r.mZ)((0,r.H9)(l.db,"users",t.tenantId,"bill",t.id),{status:"Paid",updatedAt:(0,r.O5)()})}catch(e){}await Ne()}},children:[(0,u.jsx)(c.CMH,{style:{marginRight:6}}),"Mark All Filtered Paid"]})]}),(0,u.jsxs)("div",{className:"summary-cards",children:[(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.MxO,{style:m})," Total Rent (filtered)"]}),value:"\u20b9".concat(ke.rent)}),(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.lHQ,{style:m})," Total Electricity (filtered)"]}),value:"\u20b9".concat(ke.elec)}),(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.wTh,{style:m})," Grand Total (filtered)"]}),value:"\u20b9".concat(ke.grand)})]}),(0,u.jsxs)("div",{className:"tenant-table bill-table",children:[(0,u.jsxs)("h3",{className:"table-title",children:[(0,u.jsx)(c.wTh,{style:m})," Bill List"]}),(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{className:"thead",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Tenant"}),(0,u.jsx)("th",{children:"Flat"}),(0,u.jsx)("th",{children:"Type"}),(0,u.jsx)("th",{children:"Month"}),(0,u.jsx)("th",{children:"Year"}),(0,u.jsx)("th",{children:"Amount"}),(0,u.jsx)("th",{children:"Status"}),(0,u.jsx)("th",{children:"Overdue"}),(0,u.jsx)("th",{children:"Added By"}),(0,u.jsx)("th",{children:"Created At"}),(0,u.jsx)("th",{children:"Ref ID"}),(0,u.jsx)("th",{children:"Note"}),(0,u.jsx)("th",{children:"Mark paid"}),(0,u.jsx)("th",{children:"Delete"})]})}),(0,u.jsxs)("tbody",{className:"tbody",children:[Ie.map(((t,a)=>{var n;const s=e.find((e=>e.id===t.tenantId)),i=null!==t&&void 0!==t&&null!==(n=t.createdAt)&&void 0!==n&&n.toDate?t.createdAt.toDate().toLocaleString():null!==t&&void 0!==t&&t.billFor?new Date(t.billFor).toLocaleString():"-";return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(null===s||void 0===s?void 0:s.name)||"-"}),(0,u.jsx)("td",{children:(null===s||void 0===s?void 0:s.flatNumber)||"-"}),(0,u.jsx)("td",{children:t.type}),(0,u.jsx)("td",{children:t.month}),(0,u.jsx)("td",{children:t.year}),(0,u.jsx)("td",{children:O.format(Number(t.amount)||0)}),(0,u.jsx)("td",{children:(0,u.jsxs)("select",{className:"select small",value:t.status,onChange:e=>(async(e,t)=>{try{await(0,r.mZ)((0,r.H9)(l.db,"users",e.tenantId,"bill",e.id),{status:t,updatedAt:(0,r.O5)()}),await Ne()}catch(a){}})(t,e.target.value),children:[(0,u.jsx)("option",{value:"Pending",children:"Pending"}),(0,u.jsx)("option",{value:"Paid",children:"Paid"})]})}),(0,u.jsx)("td",{children:Oe(t)?"\u26a0\ufe0f":""}),(0,u.jsx)("td",{children:t.addedBy||"-"}),(0,u.jsx)("td",{children:i}),(0,u.jsx)("td",{children:t.refId||"-"}),(0,u.jsx)("td",{children:(0,u.jsx)("input",{className:"input small",type:"text",defaultValue:t.note||"",onBlur:e=>(async(e,t)=>{try{await(0,r.mZ)((0,r.H9)(l.db,"users",e.tenantId,"bill",e.id),{note:t,updatedAt:(0,r.O5)()}),await Ne()}catch(a){}})(t,e.target.value),placeholder:"Add note"})}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{className:"btn btn-small",disabled:"Paid"===t.status,onClick:()=>(async e=>{if(null!==e&&void 0!==e&&e.tenantId&&null!==e&&void 0!==e&&e.id)try{await(0,r.mZ)((0,r.H9)(l.db,"users",e.tenantId,"bill",e.id),{status:"Paid",updatedAt:(0,r.O5)()}),await Ne()}catch(t){}})(t),children:"Mark Paid"})}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{className:"btn btn-small",style:{background:"linear-gradient(135deg, #e53935, #b71c1c)"},onClick:()=>(async t=>{const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null!==e&&void 0!==e&&e.tenantUid)return e.tenantUid;if(null!==e&&void 0!==e&&e.tenantId){const a=t.find((t=>t.id===e.tenantId||t.uid===e.tenantId||t.userUid===e.tenantId));return null!==a&&void 0!==a&&a.uid?a.uid:null!==a&&void 0!==a&&a.userUid?a.userUid:e.tenantId}return null!==e&&void 0!==e&&e.uid?e.uid:null}(t,e);if(!a||null===t||void 0===t||!t.id)return void o.oR.error("Missing tenant UID or bill ID");if(window.confirm("Delete bill ".concat(t.refId||t.id,"?")))try{await(0,r.kd)((0,r.H9)(l.db,"users/".concat(a,"/bill/").concat(t.id))),j((e=>e.filter((e=>e.id!==t.id)))),o.oR.success("Bill removed")}catch(n){console.error(n),o.oR.error("Failed to remove bill")}})(t),children:"Remove"})})]},(t.tenantId||"")+(t.id||a))})),0===Ie.length&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"no-bills",colSpan:"14",style:{textAlign:"center"},children:"No bills found."})})]})]}),(0,u.jsxs)("div",{className:"pagination",children:[(0,u.jsx)("span",{children:"Page"}),(0,u.jsx)("button",{className:"btn btn-icon",disabled:K<=1,onClick:()=>X((e=>Math.max(1,e-1))),children:(0,u.jsx)(c._Jj,{})}),(0,u.jsxs)("span",{className:"page-indicator",children:[K,"/",Me]}),(0,u.jsx)("button",{className:"btn btn-icon",disabled:K>=Me,onClick:()=>X((e=>Math.min(Me,e+1))),children:(0,u.jsx)(c.X6T,{})}),(0,u.jsxs)("select",{className:"select",value:D.pageSize,onChange:e=>be({pageSize:parseInt(e.target.value,10)||10}),children:[(0,u.jsx)("option",{value:10,children:"10"}),(0,u.jsx)("option",{value:20,children:"20"}),(0,u.jsx)("option",{value:50,children:"50"})]})]})]}),(0,u.jsxs)("div",{className:"summary-cards",style:{marginTop:16},children:[(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.MxO,{style:m})," Total Rent (all)"]}),value:O.format(ye)}),(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.lHQ,{style:m})," Total Electricity (all)"]}),value:O.format(Se)}),(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.wTh,{style:m})," Grand Total (all)"]}),value:O.format(ye+Se)})]})]}),"settings"===f&&(0,u.jsxs)("div",{className:"settings-panel",children:[(0,u.jsx)("h2",{className:"sp-heading",children:"Settings"}),(0,u.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"sp-form",children:[(0,u.jsxs)("div",{className:"sp-group",children:[(0,u.jsx)("input",{className:"sp-input sp-span-6",type:"email",placeholder:"Default Added By Email",value:D.addedByEmail,onChange:e=>be({addedByEmail:e.target.value})}),(0,u.jsx)("input",{className:"sp-input sp-span-6",type:"text",placeholder:"Currency Symbol",value:D.currency,onChange:e=>be({currency:e.target.value})})]}),(0,u.jsxs)("div",{className:"sp-group",children:[(0,u.jsx)("input",{className:"sp-input sp-span-6",type:"number",placeholder:"Flat Limit",value:D.flatLimit,onChange:e=>be({flatLimit:Number(e.target.value)||0})}),(0,u.jsxs)("select",{className:"sp-select sp-span-6",value:D.homeView,onChange:e=>be({homeView:e.target.value}),children:[(0,u.jsx)("option",{value:"currentMonth",children:"Home shows current month"}),(0,u.jsx)("option",{value:"latest",children:"Home shows latest bill"})]})]}),(0,u.jsxs)("div",{className:"sp-group",children:[(0,u.jsx)("select",{className:"sp-select sp-span-3",value:D.homeMonth,onChange:e=>be({homeMonth:e.target.value}),children:x.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))}),(0,u.jsx)("select",{className:"sp-select sp-span-3",value:D.homeYear,onChange:e=>be({homeYear:e.target.value}),children:p.map((e=>(0,u.jsx)("option",{value:e,children:e},e)))}),(0,u.jsxs)("label",{className:"sp-checkbox sp-span-3",children:[(0,u.jsx)("input",{type:"checkbox",checked:D.showInactive,onChange:e=>be({showInactive:e.target.checked})}),"Show inactive tenants"]}),(0,u.jsxs)("select",{className:"sp-select sp-span-3",value:D.locale,onChange:e=>be({locale:e.target.value}),children:[(0,u.jsx)("option",{value:"en-IN",children:"India (en-IN)"}),(0,u.jsx)("option",{value:"en-US",children:"US (en-US)"}),(0,u.jsx)("option",{value:"hi-IN",children:"Hindi (hi-IN)"})]})]}),(0,u.jsxs)("div",{className:"sp-group",children:[(0,u.jsxs)("div",{className:"sp-span-4",children:[(0,u.jsx)("label",{className:"sp-label",children:"Bills per page"}),(0,u.jsxs)("select",{className:"sp-select",value:D.pageSize,onChange:e=>be({pageSize:parseInt(e.target.value,10)||10}),children:[(0,u.jsx)("option",{value:10,children:"10"}),(0,u.jsx)("option",{value:20,children:"20"}),(0,u.jsx)("option",{value:50,children:"50"})]})]}),(0,u.jsx)("div",{className:"sp-span-4"}),(0,u.jsx)("div",{className:"sp-span-4",style:{display:"flex",alignItems:"end",justifyContent:"flex-end"}})]})]}),(0,u.jsx)("h3",{className:"sp-section-title",children:"Tenant Management"}),(0,u.jsx)("div",{className:"tenant-table",children:(0,u.jsxs)("table",{className:"sp-table",children:[(0,u.jsx)("thead",{className:"sp-thead",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Flat"}),(0,u.jsx)("th",{children:"Name"}),(0,u.jsx)("th",{children:"Email"}),(0,u.jsx)("th",{children:"Rent"}),(0,u.jsx)("th",{children:"Status"}),(0,u.jsx)("th",{children:"Joined"}),(0,u.jsx)("th",{children:"Actions"})]})}),(0,u.jsxs)("tbody",{className:"sp-tbody",children:[Pe.map((t=>(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:t.flatNumber}),(0,u.jsx)("td",{children:(0,u.jsx)("input",{className:"sp-input small",type:"text",defaultValue:t.name,onBlur:e=>Ee(t.id,{name:e.target.value})})}),(0,u.jsx)("td",{children:(0,u.jsx)("input",{className:"sp-input small",type:"email",defaultValue:t.email,onBlur:e=>Ee(t.id,{email:e.target.value})})}),(0,u.jsx)("td",{children:(0,u.jsx)("input",{className:"sp-input small",type:"number",defaultValue:t.rentAmount,onBlur:e=>Ee(t.id,{rentAmount:Number(e.target.value||0)})})}),(0,u.jsx)("td",{children:(0,u.jsxs)("label",{className:"sp-checkbox",children:[(0,u.jsx)("input",{type:"checkbox",checked:!1!==t.active,onChange:e=>(async(e,t)=>{try{await(0,r.mZ)((0,r.H9)(l.db,"users",e),{active:t}),await Ne()}catch(a){}})(t.id,e.target.checked)}),!1!==t.active?"Active":"Inactive"]})}),(0,u.jsx)("td",{children:t.joinedOn}),(0,u.jsxs)("td",{className:"sp-actions",children:[(0,u.jsxs)("button",{className:"sp-btn small",onClick:()=>De(t.id),children:[(0,u.jsx)(c.WCW,{style:{marginRight:4}}),"Statement"]}),(0,u.jsxs)("button",{className:"sp-btn small danger",onClick:()=>(async t=>{const a=e.find((e=>e.id===t));if(window.confirm("Remove tenant ".concat((null===a||void 0===a?void 0:a.name)||t,"? This deletes their bills.")))try{const e=(0,r.rJ)(l.db,"users",t,"bill"),a=await(0,r.GG)(e);for(const n of a.docs)await(0,r.kd)((0,r.H9)(l.db,"users",t,"bill",n.id));await(0,r.kd)((0,r.H9)(l.db,"users",t)),await Ne(),alert("Tenant removed.")}catch(n){alert("Failed to remove tenant.")}})(t.id),children:[(0,u.jsx)(c.qbC,{style:{marginRight:4}}),"Remove"]})]})]},t.id))),0===Pe.length&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"sp-empty",colSpan:"7",children:"No tenants."})})]})]})})]}),!f&&!b&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"summary-cards",children:[(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.x$1,{style:m})," Total Tenants"]}),value:e.filter((e=>!!D.showInactive||!1!==e.active)).length}),(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.MxO,{style:m})," Total Rent"]}),value:O.format(ye)}),(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.lHQ,{style:m})," Total Electricity "]}),value:ke.elec}),(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.ymh,{style:m})," Flats Occupied"]}),value:"".concat(e.filter((e=>!1!==e.active)).length," / ").concat(D.flatLimit)}),(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.BS8,{style:m})," Rent Pending"]}),value:e.filter((e=>{const t=Te(e.id,"rent");return!1!==e.active&&(!t||"Paid"!==t.status)})).length})]}),(0,u.jsxs)("div",{className:"tenant-table",children:[(0,u.jsxs)("div",{className:"filters-row",children:[(0,u.jsxs)("span",{className:"search-input",children:[(0,u.jsx)(c.KSO,{style:{marginRight:6}}),(0,u.jsx)("input",{className:"input",type:"text",placeholder:"Search tenant name or flat",value:$,onChange:e=>ee(e.target.value)})]}),(0,u.jsxs)("select",{className:"select",value:te,onChange:e=>ae(e.target.value),children:[(0,u.jsx)("option",{value:"flatAsc",children:"Flat \u2191"}),(0,u.jsx)("option",{value:"flatDesc",children:"Flat \u2193"}),(0,u.jsx)("option",{value:"nameAsc",children:"Name A-Z"}),(0,u.jsx)("option",{value:"nameDesc",children:"Name Z-A"})]})]}),(0,u.jsxs)("h3",{className:"table-title",children:[(0,u.jsx)(c.rQ8,{style:m})," Tenant List (","currentMonth"===D.homeView?"".concat(D.homeMonth," ").concat(D.homeYear):"Latest bills",")"]}),(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{className:"thead",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Flat"}),(0,u.jsx)("th",{children:"Name"}),(0,u.jsx)("th",{children:"Rent"}),(0,u.jsx)("th",{children:"Rent Status"}),(0,u.jsx)("th",{children:"Electricity"}),(0,u.jsx)("th",{children:"Elec Status"}),(0,u.jsx)("th",{children:"Joined On"}),(0,u.jsx)("th",{children:"Actions"})]})}),(0,u.jsxs)("tbody",{className:"tbody",children:[Pe.map((e=>{const t=Te(e.id,"rent"),a=Te(e.id,"electricity");return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e.flatNumber}),(0,u.jsx)("td",{children:e.name}),(0,u.jsx)("td",{children:t?"".concat(O.format(Number(t.amount)||0)):"-"}),(0,u.jsx)("td",{className:"Paid"===(null===t||void 0===t?void 0:t.status)?"paid":"due",children:t?"Paid"===t.status?"\u2705 Paid":Oe(t)?"\u26a0\ufe0f Overdue":"\u274c Pending":"\u2014"}),(0,u.jsx)("td",{children:a?"".concat(O.format(Number(a.amount)||0)):"-"}),(0,u.jsx)("td",{className:"Paid"===(null===a||void 0===a?void 0:a.status)?"paid":"due",children:a?"Paid"===a.status?"\u2705 Paid":Oe(a)?"\u26a0\ufe0f Overdue":"\u274c Pending":"\u2014"}),(0,u.jsx)("td",{children:e.joinedOn}),(0,u.jsx)("td",{children:(0,u.jsxs)("button",{className:"btn btn-small",onClick:()=>De(e.id),children:[(0,u.jsx)(c.WCW,{style:{marginRight:4}}),"Statement"]})})]},e.id)})),0===Pe.length&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"no-tenants",colSpan:"8",style:{textAlign:"center"},children:"No tenants found."})})]})]})]}),(0,u.jsx)("div",{style:{maxWidth:"100%",overflowX:"auto"},children:(0,u.jsxs)("div",{className:"bill-list-container",children:[(0,u.jsx)("h2",{className:"form-heading",children:"Monthly Total"}),(0,u.jsxs)("div",{className:"summary-cards",children:[(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.MxO,{style:m})," Total Rent"]}),value:"\u20b9".concat(ke.rent)}),(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.lHQ,{style:m})," Total Electricity"]}),value:"\u20b9".concat(ke.elec)}),(0,u.jsx)(v,{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.wTh,{style:m})," Grand Total"]}),value:"\u20b9".concat(ke.grand)})]}),(0,u.jsxs)("div",{className:"tenant-table bill-table",children:[(0,u.jsxs)("h3",{className:"table-title",children:[(0,u.jsx)(c.wTh,{style:m})," Bills for ",Y," ",J]}),(0,u.jsx)("div",{className:"table-wrapper",children:(0,u.jsxs)("table",{className:"table",children:[(0,u.jsx)("thead",{className:"thead",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Tenant"}),(0,u.jsx)("th",{children:"Flat"}),(0,u.jsx)("th",{children:"Type"}),(0,u.jsx)("th",{children:"Month"}),(0,u.jsx)("th",{children:"Year"}),(0,u.jsx)("th",{className:"ta-right",children:"Amount"}),(0,u.jsx)("th",{children:"Status"})]})}),(0,u.jsx)("tbody",{className:"tbody",children:Ie.length>0?Ie.map(((t,a)=>{const n=e.find((e=>e.id===t.tenantId));return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(null===n||void 0===n?void 0:n.name)||"-"}),(0,u.jsx)("td",{children:(null===n||void 0===n?void 0:n.flatNumber)||"-"}),(0,u.jsx)("td",{className:"cap",children:t.type}),(0,u.jsx)("td",{children:t.month}),(0,u.jsx)("td",{children:t.year}),(0,u.jsx)("td",{className:"ta-right",children:O.format(Number(t.amount)||0)}),(0,u.jsx)("td",{children:t.status})]},(t.tenantId||"")+(t.id||a))})):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"no-bills",colSpan:"7",style:{textAlign:"center"},children:"No bills found for this month."})})})]})}),(0,u.jsxs)("div",{className:"pagination",children:[(0,u.jsx)("span",{children:"Page"}),(0,u.jsx)("button",{className:"btn btn-icon",disabled:K<=1,onClick:()=>X((e=>Math.max(1,e-1))),children:(0,u.jsx)(c._Jj,{})}),(0,u.jsxs)("span",{className:"page-indicator",children:[K,"/",Me]}),(0,u.jsx)("button",{className:"btn btn-icon",disabled:K>=Me,onClick:()=>X((e=>Math.min(Me,e+1))),children:(0,u.jsx)(c.X6T,{})}),(0,u.jsxs)("select",{className:"select",value:D.pageSize,onChange:e=>be({pageSize:parseInt(e.target.value,10)||10}),children:[(0,u.jsx)("option",{value:10,children:"10"}),(0,u.jsx)("option",{value:20,children:"20"}),(0,u.jsx)("option",{value:50,children:"50"})]})]})]})]})})]}),b&&(0,u.jsx)("div",{className:"loader",children:"Loading dashboard..."})]})]})]}),T&&(0,u.jsxs)("nav",{className:"bottom-nav",children:[(0,u.jsxs)("button",{className:"btn-nav",onClick:()=>y(null),children:[(0,u.jsx)(c.rQ8,{}),(0,u.jsx)("span",{children:"Home"})]}),(0,u.jsxs)("button",{className:"btn-nav",onClick:()=>y("addTenant"),children:[(0,u.jsx)(c.OiG,{}),(0,u.jsx)("span",{children:"Tenant"})]}),(0,u.jsxs)("button",{className:"btn-nav",onClick:()=>y("setRent"),children:[(0,u.jsx)(c.MxO,{}),(0,u.jsx)("span",{children:"Rent"})]}),(0,u.jsxs)("button",{className:"btn-nav",onClick:()=>y("billList"),children:[(0,u.jsx)(c.wTh,{}),(0,u.jsx)("span",{children:"Bills"})]}),(0,u.jsxs)("button",{className:"btn-nav",onClick:()=>y("settings"),children:[(0,u.jsx)(c.Pcn,{}),(0,u.jsx)("span",{children:"Settings"})]})]})]})}}}]);
//# sourceMappingURL=555.837f7694.chunk.js.map