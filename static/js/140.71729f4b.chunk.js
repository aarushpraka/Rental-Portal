"use strict";(self.webpackChunktalking_web=self.webpackChunktalking_web||[]).push([[140],{140:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var s=r(555),d=r(43),n=r(791),i=r(472),c=r(579);const l=()=>{const[e,t]=(0,d.useState)([]),[r,l]=(0,d.useState)(!0),[h,a]=(0,d.useState)("");(0,d.useEffect)((()=>{(async()=>{try{const e=n.j.currentUser;if(!e)return;const r=(0,i.P)((0,i.rJ)(n.db,"payments"),(0,i._M)("uid","==",e.uid),(0,i.My)("timestamp","desc")),d=(await(0,i.GG)(r)).docs.map((e=>(0,s.A)({id:e.id},e.data())));t(d)}catch(e){console.error(e),a("Failed to fetch payment history.")}finally{l(!1)}})()}),[]);return(0,c.jsxs)("div",{className:"rent-history",children:[(0,c.jsx)("h2",{children:"\ud83e\uddfe Rent Payment History"}),r?(0,c.jsx)("div",{className:"loader",children:"Loading history..."}):h?(0,c.jsx)("div",{className:"error-box",children:h}):0===e.length?(0,c.jsx)("p",{children:"No payment records found."}):(0,c.jsx)("div",{className:"table-wrapper",children:(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Month"}),(0,c.jsx)("th",{children:"Amount Paid (\u20b9)"}),(0,c.jsx)("th",{children:"Electricity (\u20b9)"}),(0,c.jsx)("th",{children:"Total (\u20b9)"}),(0,c.jsx)("th",{children:"Method"}),(0,c.jsx)("th",{children:"Paid On"}),(0,c.jsx)("th",{children:"Receipt"})]})}),(0,c.jsx)("tbody",{children:e.map((e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.month}),(0,c.jsx)("td",{children:e.amount-(e.electricity||0)}),(0,c.jsx)("td",{children:e.electricity||0}),(0,c.jsx)("td",{children:e.amount}),(0,c.jsx)("td",{children:e.method}),(0,c.jsx)("td",{children:e.date}),(0,c.jsx)("td",{children:e.proofURL?(0,c.jsx)("a",{href:e.proofURL,target:"_blank",rel:"noopener noreferrer",children:"View Receipt"}):"\u2014"})]},e.id)))}),(0,c.jsx)("tfoot",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{colSpan:"3",children:(0,c.jsx)("strong",{children:"Total Paid"})}),(0,c.jsx)("td",{colSpan:"4",children:(0,c.jsxs)("strong",{children:["\u20b9",e.reduce(((e,t)=>e+(t.amount||0)),0)]})})]})})]})})]})}}}]);
//# sourceMappingURL=140.71729f4b.chunk.js.map