{"version":3,"file":"static/js/347.864a17c5.chunk.js","mappings":"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","sources":["pages/tenant/Profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { auth, db } from '../../firebase';\r\nimport { doc, getDoc, updateDoc } from 'firebase/firestore';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './Profile.css';\r\n\r\nconst Profile = () => {\r\n  const [tenant, setTenant] = useState(null);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [form, setForm] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [message, setMessage] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      const user = auth.currentUser;\r\n      if (!user) return;\r\n\r\n      try {\r\n        const docRef = doc(db, 'users', user.uid);\r\n        const docSnap = await getDoc(docRef);\r\n        if (docSnap.exists()) {\r\n          const data = docSnap.data();\r\n          setTenant(data);\r\n          setForm({\r\n            phone: data.phone || '',\r\n            aadhaar: data.aadhaar || '',\r\n            preferredPayment: data.preferredPayment || '',\r\n            upiId: data.upiId || '',\r\n          });\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to load profile:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProfile();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      const user = auth.currentUser;\r\n      const docRef = doc(db, 'users', user.uid);\r\n      await updateDoc(docRef, form);\r\n      setMessage('✅ Profile updated successfully!');\r\n      setEditMode(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage('❌ Failed to update profile.');\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    auth.signOut();\r\n    navigate('/login');\r\n  };\r\n\r\n  const handlePasswordReset = () => {\r\n    auth.sendPasswordResetEmail(auth.currentUser.email);\r\n    setMessage('📧 Password reset email sent.');\r\n  };\r\n\r\n  if (loading) return <div className=\"loader\">Loading profile...</div>;\r\n  if (!tenant) return <div className=\"error-box\">Profile not found.</div>;\r\n\r\n  return (\r\n    <div className=\"profile-page\">\r\n      <h2>👤 My Profile</h2>\r\n\r\n      {message && <div className=\"message-box\">{message}</div>}\r\n\r\n      <div className=\"section\">\r\n        <h3>📋 Personal Details</h3>\r\n        <p><strong>Name:</strong> {tenant.name}</p>\r\n        <p><strong>Email:</strong> {tenant.email}</p>\r\n        <label>\r\n          Phone:\r\n          <input\r\n            name=\"phone\"\r\n            value={form.phone}\r\n            onChange={handleChange}\r\n            disabled={!editMode}\r\n          />\r\n        </label>\r\n        <label>\r\n          Aadhaar / ID:\r\n          <input\r\n            name=\"aadhaar\"\r\n            value={form.aadhaar}\r\n            onChange={handleChange}\r\n            disabled={!editMode}\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"section\">\r\n        <h3>🏠 Flat & Rent Info</h3>\r\n        <p><strong>Flat Number:</strong> {tenant.flatNumber}</p>\r\n        <p><strong>Rent Amount:</strong> ₹{tenant.rentAmount}/month</p>\r\n        <p><strong>Rent Status:</strong> {tenant.rentStatus}</p>\r\n        <p><strong>Joined On:</strong> {tenant.joinedOn}</p>\r\n      </div>\r\n\r\n      <div className=\"section\">\r\n        <h3>💳 Payment Info</h3>\r\n        <label>\r\n          Preferred Method:\r\n          <select\r\n            name=\"preferredPayment\"\r\n            value={form.preferredPayment}\r\n            onChange={handleChange}\r\n            disabled={!editMode}\r\n          >\r\n            <option value=\"\">Select</option>\r\n            <option value=\"UPI\">UPI</option>\r\n            <option value=\"Bank Transfer\">Bank Transfer</option>\r\n            <option value=\"Cash\">Cash</option>\r\n          </select>\r\n        </label>\r\n        <label>\r\n          UPI ID:\r\n          <input\r\n            name=\"upiId\"\r\n            value={form.upiId}\r\n            onChange={handleChange}\r\n            disabled={!editMode}\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"button-group\">\r\n        {editMode ? (\r\n          <>\r\n            <button onClick={handleSave}>💾 Save</button>\r\n            <button onClick={() => setEditMode(false)}>Cancel</button>\r\n          </>\r\n        ) : (\r\n          <button onClick={() => setEditMode(true)}>✏️ Edit Profile</button>\r\n        )}\r\n        <button onClick={handlePasswordReset}>🔐 Change Password</button>\r\n        <button onClick={handleLogout}>🚪 Logout</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"names":["Profile","tenant","setTenant","useState","editMode","setEditMode","form","setForm","loading","setLoading","message","setMessage","navigate","useNavigate","useEffect","async","user","auth","currentUser","docRef","doc","db","uid","docSnap","getDoc","exists","data","phone","aadhaar","preferredPayment","upiId","err","console","error","fetchProfile","handleChange","e","_objectSpread","target","name","value","_jsx","className","children","_jsxs","email","onChange","disabled","flatNumber","rentAmount","rentStatus","joinedOn","_Fragment","onClick","updateDoc","handlePasswordReset","sendPasswordResetEmail","handleLogout","signOut"],"sourceRoot":""}