"use strict";(self.webpackChunktalking_web=self.webpackChunktalking_web||[]).push([[347],{347:(e,s,n)=>{n.r(s),n.d(s,{default:()=>o});var a=n(555),r=n(43),l=n(791),i=n(472),t=n(260),d=n(579);const o=()=>{const[e,s]=(0,r.useState)(null),[n,o]=(0,r.useState)(!1),[c,h]=(0,r.useState)({}),[u,j]=(0,r.useState)(!0),[x,p]=(0,r.useState)(""),m=(0,t.Zp)();(0,r.useEffect)((()=>{(async()=>{const e=l.j.currentUser;if(e)try{const n=(0,i.H9)(l.db,"users",e.uid),a=await(0,i.x7)(n);if(a.exists()){const e=a.data();s(e),h({phone:e.phone||"",aadhaar:e.aadhaar||"",preferredPayment:e.preferredPayment||"",upiId:e.upiId||""})}}catch(n){console.error("Failed to load profile:",n)}finally{j(!1)}})()}),[]);const f=e=>{h((0,a.A)((0,a.A)({},c),{},{[e.target.name]:e.target.value}))};return u?(0,d.jsx)("div",{className:"loader",children:"Loading profile..."}):e?(0,d.jsxs)("div",{className:"profile-page",children:[(0,d.jsx)("h2",{children:"\ud83d\udc64 My Profile"}),x&&(0,d.jsx)("div",{className:"message-box",children:x}),(0,d.jsxs)("div",{className:"section",children:[(0,d.jsx)("h3",{children:"\ud83d\udccb Personal Details"}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Name:"})," ",e.name]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,d.jsxs)("label",{children:["Phone:",(0,d.jsx)("input",{name:"phone",value:c.phone,onChange:f,disabled:!n})]}),(0,d.jsxs)("label",{children:["Aadhaar / ID:",(0,d.jsx)("input",{name:"aadhaar",value:c.aadhaar,onChange:f,disabled:!n})]})]}),(0,d.jsxs)("div",{className:"section",children:[(0,d.jsx)("h3",{children:"\ud83c\udfe0 Flat & Rent Info"}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Flat Number:"})," ",e.flatNumber]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Rent Amount:"})," \u20b9",e.rentAmount,"/month"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Rent Status:"})," ",e.rentStatus]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Joined On:"})," ",e.joinedOn]})]}),(0,d.jsxs)("div",{className:"section",children:[(0,d.jsx)("h3",{children:"\ud83d\udcb3 Payment Info"}),(0,d.jsxs)("label",{children:["Preferred Method:",(0,d.jsxs)("select",{name:"preferredPayment",value:c.preferredPayment,onChange:f,disabled:!n,children:[(0,d.jsx)("option",{value:"",children:"Select"}),(0,d.jsx)("option",{value:"UPI",children:"UPI"}),(0,d.jsx)("option",{value:"Bank Transfer",children:"Bank Transfer"}),(0,d.jsx)("option",{value:"Cash",children:"Cash"})]})]}),(0,d.jsxs)("label",{children:["UPI ID:",(0,d.jsx)("input",{name:"upiId",value:c.upiId,onChange:f,disabled:!n})]})]}),(0,d.jsxs)("div",{className:"button-group",children:[n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:async()=>{try{const e=l.j.currentUser,s=(0,i.H9)(l.db,"users",e.uid);await(0,i.mZ)(s,c),p("\u2705 Profile updated successfully!"),o(!1)}catch(e){console.error(e),p("\u274c Failed to update profile.")}},children:"\ud83d\udcbe Save"}),(0,d.jsx)("button",{onClick:()=>o(!1),children:"Cancel"})]}):(0,d.jsx)("button",{onClick:()=>o(!0),children:"\u270f\ufe0f Edit Profile"}),(0,d.jsx)("button",{onClick:()=>{l.j.sendPasswordResetEmail(l.j.currentUser.email),p("\ud83d\udce7 Password reset email sent.")},children:"\ud83d\udd10 Change Password"}),(0,d.jsx)("button",{onClick:()=>{l.j.signOut(),m("/login")},children:"\ud83d\udeaa Logout"})]})]}):(0,d.jsx)("div",{className:"error-box",children:"Profile not found."})}}}]);
//# sourceMappingURL=347.864a17c5.chunk.js.map