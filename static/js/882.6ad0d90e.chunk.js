"use strict";(self.webpackChunktalking_web=self.webpackChunktalking_web||[]).push([[882],{882:(e,i,a)=>{a.r(i),a.d(i,{default:()=>d});var s=a(555),t=a(43),n=a(791),c=a(472),l=a(579);const o={rent:"\ud83e\uddfe",bill:"\u26a1",receipt:"\ud83d\udcc4",notice:"\ud83d\udce2",alert:"\ud83d\udea8"},d=()=>{const[e,i]=(0,t.useState)([]),[a,d]=(0,t.useState)(!0),[r,m]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{const e=n.j.currentUser;if(e){m(e.uid);try{const a=(0,c.P)((0,c.rJ)(n.db,"notifications"),(0,c._M)("to","in",["all",e.uid]),(0,c.My)("timestamp","desc")),t=(await(0,c.GG)(a)).docs.map((e=>(0,s.A)({id:e.id},e.data())));i(t)}catch(a){console.error("Error fetching notifications:",a)}finally{d(!1)}}})()}),[]);return(0,l.jsxs)("div",{className:"notifications-page",children:[(0,l.jsx)("h2",{children:"\ud83d\udd14 Notifications"}),a?(0,l.jsx)("div",{className:"loader",children:"Loading notifications..."}):0===e.length?(0,l.jsx)("p",{children:"No notifications found."}):(0,l.jsx)("ul",{className:"notification-list",children:e.map((e=>{var a;const t=null===(a=e.readBy)||void 0===a?void 0:a.includes(r);return(0,l.jsxs)("li",{className:"notification-item ".concat(t?"read":"unread"),onClick:()=>!t&&(async e=>{const a=(0,c.H9)(n.db,"notifications",e);await(0,c.mZ)(a,{readBy:(0,c.hq)(r)}),i((i=>i.map((i=>i.id===e?(0,s.A)((0,s.A)({},i),{},{readBy:[...i.readBy||[],r]}):i))))})(e.id),children:[(0,l.jsx)("span",{className:"icon",children:o[e.type]||"\ud83d\udce9"}),(0,l.jsxs)("div",{className:"content",children:[(0,l.jsx)("p",{className:"title",children:e.title}),(0,l.jsx)("p",{className:"message",children:e.message}),(0,l.jsx)("span",{className:"timestamp",children:new Date(e.timestamp).toLocaleString()})]}),!t&&(0,l.jsx)("span",{className:"badge",children:"\u25cf"})]},e.id)}))})]})}}}]);
//# sourceMappingURL=882.6ad0d90e.chunk.js.map